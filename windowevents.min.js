!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).WindowEvents=i()}(this,(function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}function s(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function n(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function o(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?n(Object(e),!0).forEach((function(i){s(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function l(t){return"[object Function]"===Object.prototype.toString.call(t)}var h=0,r=[],a={on:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=l(i);if(t&&i&&e){var s=!1,n={id:"cov_"+ ++h,fn:i};if(r.forEach((function(i){if(i.name===t)return i.callbacks.push(n),void(s=!0)})),!s){var o={name:t,callbacks:[n]};r.push(o)}return n.id}return!1},once:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e="cov_"+(h+1),s=function(){i.apply(null,arguments),this.off(t,e)}.bind(this);return this.on(t,s),e},signal:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return t&&r.forEach((function(e){e.name!==t||e.callbacks.forEach((function(t){t.fn.apply(null,i)}))})),this},off:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return t&&r.forEach((function(e,s,n){e.name!==t||(i?e.callbacks.forEach((function(t,e,s){t.id===i&&s.splice(e,1)})):n.splice(s,1))})),this}},c=function(t,i,e,s){var n,o=0;return"boolean"!=typeof i&&(s=e,e=i,i=void 0),function(){var l=this,h=Number(new Date)-o,r=arguments;function a(){o=Number(new Date),e.apply(l,r)}function c(){n=void 0}s&&!n&&a(),n&&clearTimeout(n),void 0===s&&h>t?a():!0!==i&&(n=setTimeout(s?c:a,void 0===s?t-h:t))}},d=function(t,i,e){return void 0===e?c(t,i,!1):c(t,e,!1!==i)},u=function(){function i(e,s,n){t(this,i),this.signal=e.signal,this.options=s,this.windowSize=n,this.scrollTimeout=null,this.debouncedListener=this.debouncedListener.bind(this),this.throttledListener=this.throttledListener.bind(this),this.updateState()}return e(i,[{key:"updateState",value:function(){this.scrollTop=this.lastScrollTop=window.scrollY||window.pageYOffset,this.scrollPercent=this.scrollTop/(this.windowSize.scrollHeight-this.windowSize.height)*100}},{key:"getState",value:function(){return{scrollTop:this.scrollTop,scrollPercent:this.scrollPercent}}},{key:"debouncedListener",value:function(){this.scrollTop=window.scrollY||window.pageYOffset,this.scrollPercent=this.scrollTop/(this.windowSize.scrollHeight-this.windowSize.height)*100,this.signal("scroll.start",[{scrollTop:this.scrollTop,scrollPercent:this.scrollPercent}]),this.lastScrollTop=this.scrollTop}},{key:"throttledListener",value:function(){var t=this;this.scrollTop=window.scrollY||window.pageYOffset,this.scrollPercent=this.scrollTop/(this.windowSize.scrollHeight-this.windowSize.height)*100;var i={scrollTop:this.scrollTop,scrollPercent:this.scrollPercent};this.signal("scroll",[i]),this.scrollTop>this.lastScrollTop?this.signal("scroll.down",[i]):this.scrollTop<this.lastScrollTop&&this.signal("scroll.up",[i]),this.scrollTop<=0&&this.signal("scroll.top",[i]),i.scrollPercent>=100&&this.signal("scroll.bottom",[i]),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){t.signal("scroll.stop",[i])}),this.options.scrollDelay+1),this.lastScrollTop=this.scrollTop}}]),i}(),g=function(){function i(e,s){t(this,i),this.signal=e.signal,this.options=s,this.resizeTimeout=null,this.debouncedListener=this.debouncedListener.bind(this),this.throttledListener=this.throttledListener.bind(this),this.updateState()}return e(i,[{key:"updateState",value:function(){this.height=this.lastH=window.innerHeight,this.width=this.lastW=window.innerWidth,this.scrollHeight=this.lastS=document.body.scrollHeight,this.orientation=this.lastO=this.height>this.width?"portrait":"landscape"}},{key:"getState",value:function(){return{height:this.height,width:this.width,scrollHeight:this.scrollHeight,orientation:this.orientation}}},{key:"debouncedListener",value:function(){this.height=window.innerHeight,this.width=window.innerWidth,this.scrollHeight=document.body.scrollHeight,this.orientation=this.height>this.width?"portrait":"landscape";var t={height:this.height,width:this.width,scrollHeight:this.scrollHeight,orientation:this.orientation};this.signal("resize.start",[t]),this.lastH=this.height,this.lastW=this.width,this.lastS=this.scrollHeight}},{key:"throttledListener",value:function(){var t=this;this.height=window.innerHeight,this.width=window.innerWidth,this.scrollHeight=document.body.scrollHeight,this.orientation=this.height>this.width?"portrait":"landscape";var i={height:this.height,width:this.width,scrollHeight:this.scrollHeight,orientation:this.orientation};this.signal("resize",[i]),this.orientation!==this.lastO&&this.signal("resize.orientationChange",[i]),this.scrollHeight!==this.lastS&&this.signal("resize.scrollHeightChange",[i]),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){t.signal("resize.stop",[i])}),this.options.resizeDelay+1),this.lastH=this.height,this.lastW=this.width,this.lastS=this.scrollHeight,this.lastO=this.orientation}}]),i}(),f=function(){function i(e,s){t(this,i),this.signal=e.signal,this.options=s,this.changeListenter=this.changeListenter.bind(this),this.updateState()}return e(i,[{key:"updateState",value:function(){this.visible=!document.hidden}},{key:"getState",value:function(){return{visible:this.visible}}},{key:"changeListenter",value:function(){this.visible=!document.hidden;var t={visible:this.visible};this.signal("visibilityChange",[t]),this.visible?this.signal("visibilityChange.show",[t]):this.signal("visibilityChange.hide",[t])}}]),i}(),p=function(){function i(e,s){t(this,i),this.signal=e.signal,this.options=s,this.changeListenter=this.changeListenter.bind(this),this.updateState()}return e(i,[{key:"updateState",value:function(){this.loaded=document.readyState}},{key:"getState",value:function(){return{loaded:this.loaded}}},{key:"changeListenter",value:function(){this.loaded=document.readyState;var t={loaded:this.loaded};this.signal("load",[t]),"interactive"===this.loaded?this.signal("load.interactive",[t]):"complete"===this.loaded&&this.signal("load.complete",[t])}}]),i}();return function i(e){var s=this;t(this,i);var n={scrollDelay:100,resizeDelay:350};this.options=e?o(o({},n),e):n,this.on=a.on,this.once=a.once,this.off=a.off;var l=new g(a,this.options),h=new u(a,this.options,l),r=new f(a,this.options),w=new p(a,this.options);this.getState=function(){return o(o(o(o({},l.getState()),h.getState()),r.getState()),w.getState())},this.updateState=function(){return l.updateState(),h.updateState(),r.updateState(),w.updateState(),s.getState()},window.addEventListener("scroll",d(this.options.scrollDelay,!0,h.debouncedListener),!1),window.addEventListener("scroll",c(this.options.scrollDelay,!1,h.throttledListener),!1),window.addEventListener("resize",d(this.options.resizeDelay,!0,l.debouncedListener),!1),window.addEventListener("resize",c(this.options.resizeDelay,!1,l.throttledListener),!1),window.addEventListener("visibilitychange",r.changeListenter,!1),document.addEventListener("readystatechange",(function(){s.updateState(),w.changeListenter()}),!1)}}));